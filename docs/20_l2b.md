# Ordner für l2b lokal erstellen

mkdir -p lb2/webalizer
cd lb2/webalizer

# Vagrant-Projekt erstellen
<img width="939" height="191" alt="image" src="https://github.com/user-attachments/assets/91bff7ec-1c6f-488b-a1fd-667b740d5e83" />
<img width="930" height="378" alt="image" src="https://github.com/user-attachments/assets/7684a291-b93a-498b-b37b-294eec98548a" />

# Apache + Webalizer installieren
<img width="425" height="19" alt="image" src="https://github.com/user-attachments/assets/578b719b-1dd5-49ba-985a-4b88357a26b4" />

<img width="607" height="31" alt="image" src="https://github.com/user-attachments/assets/217f92a6-e354-4805-a85a-cbc35c9d8751" />


## Test-Traffic erzeugen (damit Webalizer was zu analysieren hat)
<img width="612" height="177" alt="image" src="https://github.com/user-attachments/assets/9dfc7572-9ff6-425c-9b86-93afa4af5357" />


## Apache Logs rotieren + Webalizer Lauf erzwingen
<img width="628" height="40" alt="image" src="https://github.com/user-attachments/assets/4e8ae00a-be91-46a0-b138-677621086ffc" />

<img width="610" height="157" alt="image" src="https://github.com/user-attachments/assets/fcaddd1f-684e-4a2b-a557-abfa91b7516d" />

## Check: gibt’s logrotate config?
<img width="582" height="40" alt="image" src="https://github.com/user-attachments/assets/0d9bbac6-ad06-4789-b0e4-1e22f9fa9575" />

## Webalizer Output-Pfad fixen + Report erzeugen
<img width="928" height="135" alt="image" src="https://github.com/user-attachments/assets/5c1f7c05-185d-489a-a332-804b324cfe1b" />

## Check ob Report da ist
<img width="620" height="218" alt="image" src="https://github.com/user-attachments/assets/ae99d934-b102-411f-be01-f4408ce8db90" />

# Testen
## Vagrant-File im Host öffnen
Folgendes im File einfügen:
Vagrant.configure("2") do |config|
  config.vm.box = "ubuntu/xenial64"

  config.vm.network "forwarded_port", guest: 80, host: 8080, auto_correct: true
  config.vm.synced_folder ".", "/var/www/html"

  config.vm.provider "virtualbox" do |vb|
    vb.memory = "512"
  end

  config.vm.provision "shell", inline: <<-SHELL
    set -o xtrace

    sudo apt-get update
    sudo apt-get -y install apache2 webalizer

    # Erstmal Report erzeugen (braucht Logs)
    curl http://localhost/ >/dev/null 2>&1
    curl http://localhost/ >/dev/null 2>&1
    curl http://localhost/ >/dev/null 2>&1
    curl http://localhost/ >/dev/null 2>&1
    curl http://localhost/bad >/dev/null 2>&1

    # Output-Pfad fixen
    sudo sed -i -e "s:/var/www/webalizer:/var/www/html/webalizer:" /etc/webalizer/webalizer.conf
    sudo mkdir -p /var/www/html/webalizer

    # Logs rotieren + neuen Report generieren
    sudo logrotate -f /etc/logrotate.d/apache2
    sudo /etc/cron.daily/webalizer
  SHELL
end

## VM neu bauen (damit Provisioning sauber läuft)
<img width="930" height="155" alt="image" src="https://github.com/user-attachments/assets/b993aa53-6c37-4193-8b82-25c1d60136bd" />

## Test im Browser (Host)
- http://127.0.0.1:8080/
- http://127.0.0.1:8080/webalizer/

<img width="946" height="999" alt="image" src="https://github.com/user-attachments/assets/35d15c5e-38c4-48b5-8300-783279c20484" />
<img width="960" height="832" alt="image" src="https://github.com/user-attachments/assets/74f3f9ea-dcd8-4610-9f28-3f296eda5c8b" />


 


